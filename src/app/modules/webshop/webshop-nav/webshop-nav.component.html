<div class="webshop webshop-container">
  <header
    class="webshop__navigation"
    [class.is-scrolled]="scrolled"
    [class.is-glass]="true"
  >
    <div class="nav-wrap">
      <!-- Toolbar -->
      <div class="nav-toolbar" role="search">
        <autom-button
          class="nav-btn"
          [iconSource]="'car'"
          [iconPrefix]="true"
          [iconColor]="colorEnum.INFO_25_FILL"
          [type]="buttonType.PRIMARY"
          [theme]="buttonTheme.LIGHT_ORANGE"
          [label]="'Izaberi vozilo'"
          (clickEvent)="chooseVehicleVisible = true"
        >
        </autom-button>

        <div class="nav-search">
          <autom-input-fields
            class="nav-input"
            [placeholder]="'Unesite kataloski ili OE broj'"
            [round]="true"
            [size]="sizeEnum.FULL"
            [suffixIcon]="'search'"
            [value]="searchTerm"
            (customActionEvent)="emitValue($event)"
            (emitSelected)="searchTerm = $event"
          >
          </autom-input-fields>
          <!-- warning sits under the input, never overlaps -->
          <small class="nav-warning" *ngIf="selectedVehicle?.linkageTargetId">
            Pretraga će resetovati izabrano vozilo
          </small>
        </div>

        <autom-button
          class="nav-btn"
          [iconSource]="iconEnum.LIST"
          [iconPrefix]="true"
          [iconColor]="colorEnum.INFO_25_FILL"
          [type]="buttonType.PRIMARY"
          [theme]="buttonTheme.BLUE"
          [label]="'Kategorije'"
          (clickEvent)="chooseCategoryVisible = true"
        >
        </autom-button>
      </div>

      <!-- Breadcrumbs -->
      <nav
        *ngIf="secondNavigation"
        class="nav-breadcrumbs"
        aria-label="breadcrumb"
      >
        <ol class="crumbs">
          <li class="crumb" [class.is-active]="!thirdNavigation">
            <a (click)="goToMainPage()">Početna</a>
          </li>
          <li class="crumb" [class.is-active]="!thirdNavigation">
            <a
              *ngIf="thirdNavigation; else activeSecond"
              (click)="goToSecondPage()"
            >
              {{ secondNavigation }}
            </a>
            <ng-template #activeSecond>
              <span>{{ secondNavigation }}</span>
            </ng-template>
          </li>
          <li class="crumb is-active" *ngIf="thirdNavigation">
            <span>{{ thirdNavigation }}</span>
          </li>
        </ol>
      </nav>
    </div>
  </header>
</div>

<!-- popups ostaju isto -->
<vehicle-selection-popup
  *ngIf="chooseVehicleVisible"
  (closePopupModal)="chooseVehicleVisible = false"
  (emitVehicle)="handleSelectedVehicle($event)"
>
</vehicle-selection-popup>

<categories-popup
  *ngIf="chooseCategoryVisible"
  [open]="chooseCategoryVisible"
  (categorySelected)="categorySelected($event)"
  (close)="chooseCategoryVisible = false"
>
</categories-popup>
